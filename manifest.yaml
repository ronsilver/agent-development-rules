# =============================================================================
# Agent Rules - Manifest de Configuración v2.0
# =============================================================================
# Este archivo define la configuración central para sincronizar reglas
# a diferentes agentes de AI (Windsurf, GitHub Copilot, Cursor, etc.)
#
# Uso: ./scripts/sync.sh [--agent <nombre>] [--dry-run]
# =============================================================================

version: "2.0"

# =============================================================================
# Directorio de contenido (nueva estructura organizada)
# =============================================================================

content_dir: "content"

rules:
  source_dir: "rules"
  files:
    # Core - Reglas fundamentales
    - core/global.md
    - core/clean-code.md
    - core/solid.md
    # Languages - Por lenguaje
    - languages/go.md
    - languages/python.md
    - languages/nodejs.md
    - languages/bash.md
    # Infrastructure - IaC y DevOps
    - infrastructure/terraform.md
    - infrastructure/docker.md
    - infrastructure/kubernetes.md
    - infrastructure/aws.md
    # Quality - Calidad de código
    - quality/testing.md
    - quality/security.md
    - quality/performance.md
    - quality/scalability.md
    - quality/linting.md
    - quality/accessibility.md
    # Process - Procesos de desarrollo
    - process/git.md
    - process/documentation.md
    - process/operational-excellence.md
    # Agents - Específico por agente
    - agents/windsurf.md
    - agents/copilot.md

workflows:
  source_dir: "workflows"
  files:
    # Validation
    - validation/validate.md
    - validation/test.md
    - validation/lint.md
    # Git
    - git/pre-push.md
    - git/pr-review.md
    - git/fix-pr-comments.md
    # Infrastructure
    - infrastructure/terraform-module.md
    - infrastructure/docker-build.md
    - infrastructure/k8s-validate.md
    # Security
    - security/security-check.md

prompts:
  source_dir: "prompts"
  files:
    - review.prompt.md
    - security.prompt.md
    - test.prompt.md
    - refactor.prompt.md
    - document.prompt.md
    - validate.prompt.md
    - commit.prompt.md
    - explain.prompt.md
    - debug.prompt.md

# =============================================================================
# Configuración por Agente
# =============================================================================

agents:
  windsurf:
    enabled: true
    description: "Windsurf IDE / Codeium Cascade"
    targets:
      rules:
        path: "${HOME}/.codeium/memories/global_rules.md"
        format: merged
        strip_frontmatter: true
        header: |
          ---
          trigger: always
          ---

          # Reglas de Desarrollo para Windsurf/Cascade

          <!-- Generado automáticamente por sync.sh -->
          <!-- Última actualización: {{timestamp}} -->

      workflows:
        path: "${HOME}/.codeium/global_workflows/default.md"
        format: merged
        strip_frontmatter: true
        header: |
          ---
          name: global-workflows
          description: Workflows globales para Windsurf
          ---

          # Workflows Globales

          <!-- Generado automáticamente por sync.sh -->
          <!-- Última actualización: {{timestamp}} -->

  github-copilot:
    enabled: true
    description: "GitHub Copilot (VS Code / IntelliJ)"
    targets:
      rules:
        paths:
          - "${HOME}/.config/github-copilot/intellij"
          - "${HOME}/Library/Application Support/Code/User/prompts"
        glob_paths:
          - "${HOME}/.vscode/extensions/github.copilot-chat-*/assets/prompts"
        format: merged
        output_filename: "Default.instructions.md"
        strip_frontmatter: true
        header: |
          ---
          applyTo: "**"
          description: Instrucciones globales de desarrollo
          ---

          <!-- Generado automáticamente por sync.sh -->
          <!-- Última actualización: {{timestamp}} -->

      prompts:
        paths:
          - "${HOME}/.config/github-copilot/intellij"
          - "${HOME}/Library/Application Support/Code/User/prompts"
        format: merged
        output_filename: "default.prompt.md"
        strip_frontmatter: true
        header: |
          ---
          description: Prompts reutilizables para tareas comunes
          ---

          <!-- Generado automáticamente por sync.sh -->
          <!-- Última actualización: {{timestamp}} -->

  cursor:
    enabled: false
    description: "Cursor IDE"
    targets:
      rules:
        path: "${HOME}/.cursor/rules/global.md"
        format: merged
        strip_frontmatter: true

  local-project:
    enabled: false
    description: "Copiar reglas a proyecto local"
    targets:
      rules:
        path: ".windsurf/rules"
        format: individual
        strip_frontmatter: false
      workflows:
        path: ".windsurf/workflows"
        format: individual
        strip_frontmatter: false
